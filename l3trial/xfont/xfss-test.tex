
% \immediate\write18{tex xfss.dtx}

% \RequirePackage{xparse}
% \ExplSyntaxOn
% \msg_redirect_module:nnn {xparse} {warning} {info}
% \cs_set:Npn \msg_use:nnnnxxxx #1#2#3#4#5#6#7#8
%   { \iow_term:x { \exp_not:n {#1||#3|#4} | #5|#6|#7|#8 } }

% \tl_clear:N \l_tmpa_tl
% \tl_map_inline:nn
%   {\textfont\scriptfont\scriptscriptfont}
%   {
%     \prg_stepwise_inline:nnnn {0}{1}{7}
%       { \tl_put_right:Nn \l_tmpa_tl { \the #1 ##1 \iow_newline: } }
%   }
% \cs_new:Npx \XX { \exp_args:Nx \tl_show:n { \exp_not:V \l_tmpa_tl } }

% %\errorcontextlines=999
% %\RequirePackage{xfss}
% %\msg_redirect_module:nnn {xfss} {warning} {info}
% \ExplSyntaxOff

\RequirePackage{xfss}
\documentclass[11pt]{article}
\usepackage{amsmath}
\usepackage{trace}

\usepackage[OT1,QX,T1]{fontenc}

% %%% BROKEN: (\seq_map_inline:Nn is not nestable)
% \showthe\textfont2
% %\traceon
%\DeclareSymbolFont{symbols}{T1}{lmtt}{m}{n}
% %\traceoff
% \showthe\textfont2
% \DeclareMathSymbol{\fooSymbolA}{\mathord} {letters} {"1D}
% \DeclareMathSymbol{\fooSymbolB}{\mathord} {letters} {"0D}
% \DeclareMathAccent{\fooAccent}{\mathord} {letters} {"7E}
% \show\upsilon
% \show\alpha
% \show\fooSymbolA
% \show\fooSymbolB
\begin{document}



% %<*trace>
% \cs_new_protected:Npn \xfss_trace_fontdimens:n #1
%   {
%     \tl_set:Nx \l_xfss_trace_tl
%       {
%         textfont~#1 ~ = ~ %
%         \exp_after:wN \token_to_meaning:N
%         \tex_the:D \textfont #1: ~ %
%       }
%     \prg_stepwise_inline:nnnn {1}{1}{7}
%       {
%         \tl_put_right:Nx \l_xfss_trace_tl
%           { \the \fontdimen ##1 \textfont #1, ~ }
%       }
%     \iow_term:x { \l_xfss_trace_tl \on@line }
%   }
% %</trace>

$a+b$

% hello $\XX\vec{a}+\fooAccent{b}+\fooSymbolA$ acc\'ent \v u

italic correction: \textit{f}g {\itshape f}g

\def\nocorrlist{g}
no itcorr: \textit{f}g {\itshape f}g

\def\nocorrlist{}
no itcorr: \textit{f\nocorr}g {\itshape f}g

% not broken:
{\fontencoding{T1}\fontfamily{lmr}\fontsize{10.1pt}{10.1pt}\selectfont ten point one points}

% not broken:
{\fontencoding{OT1}\fontfamily{lmr}\fontsize{10.1pt}{10.1pt}\selectfont ten point one points}

% surprised this is a bit smaller: (seems that way in 2e as well)
{\fontencoding{OT1}\fontfamily{cmr}\fontsize{10.1pt}{10.1pt}\selectfont ten point one points}

$\ss$ % warning

fk fl

\fontencoding{QX}\selectfont

fk fl

hello \fontshape{xx}\selectfont hello

blah \fontsize{18.7}{0}\selectfont blah

\[
\sqrt{x^{x^y}}
\]

\end{document}


