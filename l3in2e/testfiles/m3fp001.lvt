%
% Copyright (C) 2010 LaTeX3 Project
% 

\documentclass{minimal}
\input{regression-test}

\RequirePackage{expl3}

\begin{document}
\START
\AUTHOR{Frank Mittelbach}
\ExplSyntaxOn

\OMIT
\TIMO


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{1:~ new~ +~ show}{
 \fp_new:N \l_A_fp
 \fp_new:c {l_A_fp}
 \fp_new:N \g_A_fp
 \fp_new:c {l_B_fp}
 \fp_show:N \l_A_fp
 \fp_show:N \g_A_fp
 \fp_show:N \l_B_fp
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{2:~ set_from_dim}{
  \fp_set_from_dim:Nn  \l_A_fp {1pt}
  \fp_gset_from_dim:Nn \g_A_fp {1sp}
 \fp_show:N \l_A_fp
 \dimen0=1sp
 \showthe\dimen0
 \fp_show:N \g_A_fp
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{3:~ set_eq}{
 \fp_show:N \l_A_fp
 \fp_gset_eq:NN \l_A_fp \g_A_fp
 \fp_show:N \l_A_fp
 \fp_zero:N  \l_A_fp  
 \fp_gzero:N \g_A_fp  
 \fp_show:N \l_A_fp
 \fp_show:N \g_A_fp
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{4:~ setting~ fps}{
 \fp_show:N \g_A_fp 
 \fp_set:Nn \l_A_fp {123456789.123456789}
 \fp_show:N \l_A_fp
 \fp_set:Nn \l_A_fp {123456789.123456789123}
 \fp_show:N \l_A_fp
 \fp_set:Nn \l_A_fp {12345678901.12345678901}
 \fp_show:N \l_A_fp
 \fp_set:Nn \l_B_fp {12345.123456}
 \fp_gset:Nn \g_A_fp {\l_B_fp}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{5:~ setting~ fps}{
 \fp_show:N \l_B_fp
 \fp_show:N \g_A_fp % now 12345.123456?
 \fp_gset:Nn \g_A_fp {-3.5} 
 \fp_show:N \g_A_fp
 \fp_set:Nn \l_B_fp {--1.}
 \fp_show:N \l_B_fp          % should give +1!
 \fp_set:Nn \l_B_fp {.3}
 \fp_show:N \l_B_fp
 \fp_set:Nn \l_B_fp {-.55}
 \fp_show:N \l_B_fp
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{6:~ abs}{
 \fp_set:Nn \l_A_fp {-5}
 \fp_abs:N  \l_A_fp
 \fp_show:N \l_A_fp 
 \fp_abs:N  \l_A_fp
 \fp_show:N \l_A_fp 
 \fp_set:Nn \l_A_fp {6}
 \fp_abs:N  \l_A_fp
 \fp_show:N \l_A_fp 
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{7:~ neg}{
 \fp_set:Nn \l_A_fp {-5}
 \fp_neg:N  \l_A_fp
 \fp_show:N \l_A_fp 
 \fp_neg:N  \l_A_fp
 \fp_show:N \l_A_fp 
 \fp_set:Nn \l_A_fp {6}
 \fp_neg:N  \l_A_fp
 \fp_show:N \l_A_fp 
}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{8:~add}{
  \fp_add:Nnn \l_A_fp { 1.234 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_add:Nnn \l_A_fp { -1.234 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_add:Nnn \l_A_fp { 1.234 }  { -5.678 }
  \fp_show:N \l_A_fp
  \fp_add:Nnn \l_A_fp { -1.234 }  { -5.678 }
  \fp_show:N \l_A_fp
  \fp_add:Nnn \l_A_fp { 0 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_add:Nnn \l_A_fp { 1.234 }  { 0 }
  \fp_show:N \l_A_fp
  \fp_add:Nn \l_A_fp { 1.234 }  
  \fp_show:N \l_A_fp
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{9:~sub}{
  \fp_sub:Nnn \l_A_fp { 1.234 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_sub:Nnn \l_A_fp { -1.234 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_sub:Nnn \l_A_fp { 1.234 }  { -5.678 }
  \fp_show:N \l_A_fp
  \fp_sub:Nnn \l_A_fp { -1.234 }  { -5.678 }
  \fp_show:N \l_A_fp
  \fp_sub:Nnn \l_A_fp { 0 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_sub:Nnn \l_A_fp { 1.234 }  { 0 }
  \fp_show:N \l_A_fp
  \fp_sub:Nn \l_A_fp { 1.234 }  
  \fp_show:N \l_A_fp
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{10:~mul}{
  \fp_mul:Nnn \l_A_fp { 1.234 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_mul:Nnn \l_A_fp { -1.234 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_mul:Nnn \l_A_fp { 1.234 }  { -5.678 }
  \fp_show:N \l_A_fp
  \fp_mul:Nnn \l_A_fp { -1.234 }  { -5.678 }
  \fp_show:N \l_A_fp
  \fp_mul:Nnn \l_A_fp { 0 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_mul:Nnn \l_A_fp { 1.234 }  { 0 }
  \fp_show:N \l_A_fp
  \fp_set:Nn \l_A_fp { 1.234 }
  \fp_mul:Nn \l_A_fp { 1.234 }  
  \fp_show:N \l_A_fp
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{11:~div}{
  \fp_div:Nnn \l_A_fp { 1.234 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_div:Nnn \l_A_fp { -1.234 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_div:Nnn \l_A_fp { 1.234 }  { -5.678 }
  \fp_show:N \l_A_fp
  \fp_div:Nnn \l_A_fp { -1.234 }  { -5.678 }
  \fp_show:N \l_A_fp
  \fp_div:Nnn \l_A_fp { 0 }  { 5.678 }
  \fp_show:N \l_A_fp
  \fp_div:Nnn \l_A_fp { 1.234 }  { 0 }
  \fp_show:N \l_A_fp
  \fp_set:Nn \l_A_fp { 1.234 }
  \fp_div:Nn \l_A_fp { 1.234 }  
  \fp_show:N \l_A_fp
}


\END
