%
% Copyright (C) 2009 LaTeX3 Project
% 

\documentclass{minimal}
\input{regression-test}
% Leave some padding so that the line numbers 
% of the tests don't change later on.

\RequirePackage{expl3}

\begin{document}
\START
\AUTHOR{Joseph Wright}
\ExplSyntaxOn

\OMIT
\tl_new:Nn \filea { filetest.txt }
\tl_new:Nn \fileb { NotAFile.xxx.yyy.zzz }
\tl_set:cn {input@path} {testfiles/}
\TIMO

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{If~file~exists~(expect~F/F/T/T/T/T/F/F)}{
  \file_if_exist:nF {filetest.txt}{\FALSE}
  \file_if_exist:nF {\filea}{\FALSE}
  \file_if_exist:nF {NotAFile.xxx.yyy.zzz}{\FALSE}
  \file_if_exist:nF {\fileb}{\FALSE}
  \file_if_exist:nT {filetest.txt}{\TRUE}
  \file_if_exist:nT {\filea}{\TRUE}
  \file_if_exist:nT {NotAFile.xxx.yyy.zzz}{\TRUE}
  \file_if_exist:nT {\fileb}{\TRUE}
  \file_if_exist:nTF {filetest.txt}{\TRUE}{\FALSE}
  \file_if_exist:nTF {\filea}{\TRUE}{\FALSE}
  \file_if_exist:nTF {NotAFile.xxx.yyy.zzz}{\TRUE}{\FALSE}
  \file_if_exist:nTF {\fileb}{\TRUE}{\FALSE}
}
\TEST{Predicate~versions~(expect~nothing!)}{
  \file_if_exist_p:n {filetest.txt}
  \file_if_exist_p:n {\filea}
  \file_if_exist_p:n {NotAFile.xxx.yyy.zzz}
  \file_if_exist_p:n {\fileb}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{Adding~a~path~to~a~file}{
  \OMIT
  \tl_new:N \l_test_tl
  \TIMO
  \file_add_path:nN {filetest.txt} \l_test_tl \TYPE {\l_test_tl}
  \file_add_path:nN {\filea} \l_test_tl \TYPE {\l_test_tl}
  \file_add_path:nN {NotAFile.xxx.yyy.zzz} \l_test_tl \TYPE {\l_test_tl}
  \file_add_path:nN {\fileb} \l_test_tl \TYPE {\l_test_tl}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{Loading~a~file}{
  \file_input:n {filetest.txt}
  \file_input:n {\filea}
  \file_input:n {NotAFile.xxx.yyy.zzz}
  \file_input:n {\fileb}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{Loading~a~file~without~recording}{
  \file_input_no_record:n {filetest.txt}
  \file_input_no_record:n {\filea}
  \file_input_no_record:n {NotAFile.xxx.yyy.zzz}
  \file_input_no_record:n {\fileb}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{Unsafe~file~loading~(careful)}{
  \file_input_no_check:n {testfiles/filetest.txt}
  \file_input_no_check:n {testfiles/\filea}
  \file_input_no_check_no_record:n {testfiles/filetest.txt}
  \file_input_no_check_no_record:n {testfiles/\filea}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\END
