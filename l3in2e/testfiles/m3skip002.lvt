%
% Copyright (C) 2008 LaTeX3 Project
% 

\documentclass{minimal}
\input{regression-test}

\RequirePackage{expl3}
\ExplSyntaxOff

\begin{document}
  
\START
\AUTHOR{Will Robertson}
\ExplSyntaxOn


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\TEST{Infinite~glue~test}{
  \skip_if_infinite_glue:nTF {0pt plus 10mm}{\TRUE}{\FALSE}
  \skip_if_infinite_glue:nTF {0pt plus 1fil}{\TRUE}{\FALSE}
  \skip_if_infinite_glue:nTF {0pt minus 1fil}{\TRUE}{\FALSE}
  \skip_set:Nn \g_tmpa_skip {0pt plus 10mm minus 5mm}
  \skip_if_infinite_glue:nTF {\g_tmpa_skip}{\TRUE}{\FALSE}
  \skip_set:Nn \g_tmpa_skip {0pt plus 1fil}
  \skip_if_infinite_glue:nTF {\g_tmpa_skip}{\TRUE}{\FALSE}
  \skip_set:Nn \g_tmpa_skip {0pt plus 1 fil minus 2fill}
  \skip_if_infinite_glue:nTF {\g_tmpa_skip}{\TRUE}{\FALSE}
  \SEPARATOR
  \skip_if_infinite_glue:nT {0pt plus 1fil}{\TRUE}
  \skip_if_infinite_glue:nT {0pt minus 1fil}{\TRUE}
  \skip_set:Nn \g_tmpa_skip {0pt plus 1fil}
  \skip_if_infinite_glue:nT {\g_tmpa_skip}{\TRUE}
  \skip_set:Nn \g_tmpa_skip {0pt plus 1 fil minus 2fill}
  \skip_if_infinite_glue:nT {\g_tmpa_skip}{\TRUE}
  \SEPARATOR
  \skip_if_infinite_glue:nF {0pt plus 10mm}{\FALSE}
  \skip_set:Nn \g_tmpa_skip {0pt plus 10mm minus 5mm}
  \skip_if_infinite_glue:nF {\g_tmpa_skip}{\FALSE}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\TEST{while_do/do_while}{
  \dim_zero:N \l_tmpa_dim
  \dim_while_do:nNnn {\l_tmpa_dim} < {10pt} {
    \message {[\dim_use:N \l_tmpa_dim]} 
    \dim_add:Nn \l_tmpa_dim {2pt}
  }
  \SEPARATOR
  \dim_zero:N \l_tmpa_dim
  \dim_until_do:nNnn {\l_tmpa_dim} > {10pt} {
    \message {[\dim_use:N \l_tmpa_dim]} 
    \dim_add:Nn \l_tmpa_dim {2pt}
  }
  \SEPARATOR
  \dim_zero:N \l_tmpa_dim
  \dim_do_while:nNnn {\l_tmpa_dim} < {10pt} {
    \message {[\dim_use:N \l_tmpa_dim]} 
    \dim_add:Nn \l_tmpa_dim {2pt}
  }
  \SEPARATOR
  \dim_zero:N \l_tmpa_dim
  \dim_do_until:nNnn {\l_tmpa_dim} > {10pt} {
    \message {[\dim_use:N \l_tmpa_dim]} 
    \dim_add:Nn \l_tmpa_dim {2pt}
  }
}

\TEST{while_do/do_while~differences}{
  \message{while:nT:~}
  \dim_zero:N \l_tmpa_dim
  \dim_while_do:nNnn {\l_tmpa_dim} > {10pt} {
    \message {[\dim_use:N \l_tmpa_dim]} 
    \dim_add:Nn \l_tmpa_dim {2pt}
  }
  \SEPARATOR
  \message{while:nF:~}
  \dim_zero:N \l_tmpa_dim
  \dim_until_do:nNnn {\l_tmpa_dim} < {10pt} {
    \message {[\dim_use:N \l_tmpa_dim]} 
    \dim_add:Nn \l_tmpa_dim {2pt}
  }
  \SEPARATOR
  \message{do_while:nT:~}
  \dim_zero:N \l_tmpa_dim
  \dim_do_while:nNnn {\l_tmpa_dim} > {10pt} {
    \message {[\dim_use:N \l_tmpa_dim]} 
    \dim_add:Nn \l_tmpa_dim {2pt}
  }
  \SEPARATOR
  \message{do_while:nF:~}
  \dim_zero:N \l_tmpa_dim
  \dim_do_until:nNnn {\l_tmpa_dim} < {10pt} {
    \message {[\dim_use:N \l_tmpa_dim]} 
    \dim_add:Nn \l_tmpa_dim {2pt}
  }
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\TESTEXP{compare}{
  \dim_compare_p:nNn {1pt} = {1pt} \space
  \dim_compare_p:nNn {1pt} > {0pt} \space
  \dim_compare_p:nNn {0pt} < {1pt} \space
  \NEWLINE
  \dim_compare_p:nNn {1pt} = {2pt} \space
  \dim_compare_p:nNn {1pt} > {3pt} \space
  \dim_compare_p:nNn {3pt} < {1pt} \space
  \NEWLINE
  \dim_compare:nNnTF {1pt} = {1pt} {T}{F} \space
  \dim_compare:nNnTF {1pt} > {0pt} {T}{F} \space
  \dim_compare:nNnTF {0pt} < {1pt} {T}{F} \space
  \dim_compare:nNnTF {1pt} = {2pt} {T}{F} \space
  \dim_compare:nNnTF {1pt} > {3pt} {T}{F} \space
  \dim_compare:nNnTF {3pt} < {1pt} {T}{F} \space
  \NEWLINE
  \dim_compare:nNnT  {1pt} = {1pt} {T}    \space
  \dim_compare:nNnT  {1pt} > {0pt} {T}    \space
  \dim_compare:nNnT  {0pt} < {1pt} {T}    \space
  \dim_compare:nNnT  {1pt} = {2pt} {T}    \space
  \dim_compare:nNnT  {1pt} > {3pt} {T}    \space
  \dim_compare:nNnT  {3pt} < {1pt} {T}    \space
  \NEWLINE
  \dim_compare:nNnF  {1pt} = {1pt}    {F} \space
  \dim_compare:nNnF  {1pt} > {0pt}    {F} \space
  \dim_compare:nNnF  {0pt} < {1pt}    {F} \space
  \dim_compare:nNnF  {1pt} = {2pt}    {F} \space
  \dim_compare:nNnF  {1pt} > {3pt}    {F} \space
  \dim_compare:nNnF  {3pt} < {1pt}    {F} \space
}

\END
