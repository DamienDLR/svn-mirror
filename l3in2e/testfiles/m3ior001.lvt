%
% Copyright (C) 2009 LaTeX3 Project
% 

\documentclass{minimal}
\input{regression-test}
% Leave some padding so that the line numbers 
% of the tests don't change later on.

\RequirePackage{expl3}

\begin{document}
\START
\AUTHOR{Joseph Wright}
\ExplSyntaxOn

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{New~read}{
  \ior_new:N \test
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{Open~a~write}{
  \OMIT
  \ior_new:N \test
  \TIMO
  \ior_open:Nn \test { testfiles/filetest.txt }
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{Close~a~write}{
  \OMIT
  \ior_new:N \test
  \ior_open:Nn \test { testfiles/filetest.txt }
  \TIMO
  \ior_close:N \test 
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{End~of~file~conditionals~(expect~T/T/F/F)}{
  \OMIT
  \ior_new:N \test
  \TIMO
  \ior_if_eof:NT \test {\TRUE}
  \ior_if_eof:NF \test {\FALSE}
  \ior_if_eof:NTF \test {\TRUE} {\FALSE}
  \OMIT
  \ior_new:N \test
  \ior_open:Nn \test { testfiles/filetest.txt }
  \TIMO
  \ior_if_eof:NT \test {\TRUE}
  \ior_if_eof:NF \test {\FALSE}
  \ior_if_eof:NTF \test {\TRUE} {\FALSE}
}
\TEST{End~of~file~predicate}{
  \OMIT
  \ior_new:N \test
  \TIMO
  \ior_if_eof_p:N \test 
  \OMIT
  \ior_new:N \test
  \ior_open:Nn \test { testfiles/filetest.txt }
  \TIMO
  \ior_if_eof_p:N \test
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{Read~to}{
  \OMIT
  \ior_new:N \test
  \ior_open:Nn \test { testfiles/filetest.txt }
  \tl_new:N \l_test_tl
  \TIMO
  \ior_to:NN \test \l_test_tl
  \TYPE {\exp_not:V {\l_test_tl}}
}
\TEST{Global~read~to}{
  \OMIT
  \ior_new:N \test
  \ior_open:Nn \test { testfiles/filetest.txt }
  \tl_new:N \g_test_tl
  \TIMO
  \ior_gto:NN \test \g_test_tl
  \TYPE {\exp_not:V {\g_test_tl}}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\END
