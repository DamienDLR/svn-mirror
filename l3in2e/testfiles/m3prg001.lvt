%
% Copyright (C) 2008 LaTeX3 project
% 

\documentclass{minimal}
\RequirePackage{expl3}
\input{regression-test}
\begin{document}

\START
\AUTHOR{Will Robertson}

\ExplSyntaxOn

\TEST{Vertical~and~horizontal~mode~(expect~YES~NO~NO~YES)}{
  \par
  \mode_if_vertical:TF   { \YES   }{ \ERROR }
  \mode_if_horizontal:TF { \ERROR }{ \NO    }
  \par
  hello
  \mode_if_vertical:TF   { \ERROR }{ \NO    }
  \mode_if_horizontal:TF { \YES   }{ \ERROR }
}

\TEST{Inner~mode~(expect~YES~YES~YES~YES)}{
  \hbox:n{
    \mode_if_horizontal:TF { \YES }{ \ERROR }
    \mode_if_inner:TF      { \YES }{ \ERROR }
  }  
  \vbox:n{
    \mode_if_vertical:TF { \YES }{ \ERROR }
    \mode_if_inner:TF    { \YES }{ \ERROR }
  }
}

\TEST{Math~mode~(expect~NO~YES~YES~YES)}{
  maths: \mode_if_math:TF{\ERROR}{\NO} 
  $x=y   \mode_if_math:TF{\YES}{\ERROR}$
  \[x=y  \mode_if_math:TF{\YES}{\ERROR}\]
  \[ \begin{array}{c}
       % \ifmmode\YES\else\NO\fi % returns "NO" !!
       \mode_if_math:TF{\YES}{\ERROR} x \\ y
     \end{array} \]
}

%  \begin{macro}{\group_align_safe_begin:}
%  \begin{macro}{\group_align_safe_end:}
%  \begin{macro}{\scan_align_safe_stop:}

\TESTEXP{Replicate}{
  \prg_replicate:nn{1}{\YES}
  [\prg_replicate:nn{0}{\YES}]
  \prg_replicate:nn{7}{\YES}
}

\TESTEXP{Replication~negative~FAIL}{
  \prg_replicate:nn{-1}{\YES}
}

\def:Npn \myfunc #1 {[#1]~}
\TESTEXP{Stepwise}{
  \prg_stepwise_function:nnnN {0} {1} {5} \myfunc
  ^^J
  \prg_stepwise_function:nnnN {0} {1} {-5} \myfunc
  \prg_stepwise_function:nnnN {0} {-1} {5} \myfunc
  ^^J
  \prg_stepwise_function:nnnN {-1} {-2} {-2} \myfunc
}

\TEST{Stepwise~inline}{
  \prg_stepwise_inline:nnnn {0} {1} {5} {\typeout{[#1]}}
  \SEPARATOR
  \NO
  \prg_stepwise_inline:nnnn {0} {1} {-5} {\typeout{[#1]}}
  \SEPARATOR
  \NO
  \prg_stepwise_inline:nnnn {0} {-1} {5} {\typeout{[#1]}}
  % \SEPARATOR
  % \NO
  % \prg_stepwise_inline:nnnn {0} {0} {5} {\typeout{[#1]}}
  \SEPARATOR
  \prg_stepwise_inline:nnnn {0} {1} {5} {\typeout{[#1]}}
}

\TEST{Stepwise~variable}{
  \prg_stepwise_variable:nnnNn {0} {1} {5} \myvar { \typeout{[\myvar]~} }
  \SEPARATOR
  \NO
  \prg_stepwise_variable:nnnNn {0} {-1} {5} \myvar { \typeout{[\myvar]~} }
  \SEPARATOR
  \NO
  \prg_stepwise_variable:nnnNn {0} {1} {-5} \myvar { \typeout{[\myvar]~} }
  % \SEPARATOR
  % \NO
  % \prg_stepwise_variable:nnnNn {0} {0} {5} \myvar { \typeout{[\myvar]~} }
  \SEPARATOR
  \prg_stepwise_variable:nnnNn {0} {-1} {-5} \myvar { \typeout{[\myvar]~} }
}


%  \begin{macro}{\bool_new:N}
%  \begin{macro}{\bool_new:c}
%  \begin{macro}{\bool_set_true:N}
%  \begin{macro}{\bool_set_true:c}
%  \begin{macro}{\bool_set_false:N}
%  \begin{macro}{\bool_set_false:c}
%  \begin{macro}{\bool_gset_true:N}
%  \begin{macro}{\bool_gset_true:c}
%  \begin{macro}{\bool_gset_false:N}
%  \begin{macro}{\bool_gset_false:c}
%  \begin{macro}{\bool_set_eq:NN}
%  \begin{macro}{\bool_set_eq:Nc}
%  \begin{macro}{\bool_set_eq:cN}
%  \begin{macro}{\bool_set_eq:cc}
%  \begin{macro}{\bool_gset_eq:NN}
%  \begin{macro}{\bool_gset_eq:Nc}
%  \begin{macro}{\bool_gset_eq:cN}
%  \begin{macro}{\bool_gset_eq:cc}
%  \begin{macro}{\l_tmpa_bool}
%  \begin{macro}{\g_tmpa_bool}
%  \begin{macro}{\bool_if:NTF}
%  \begin{macro}{\bool_if:NT}
%  \begin{macro}{\bool_if:NF}
%  \begin{macro}{\bool_if:cTF}
%  \begin{macro}{\bool_if:cT}
%  \begin{macro}{\bool_if:cF}
%  \begin{macro}{\bool_if_p:N}
%  \begin{macro}{\bool_if_p:c}
%  \begin{macro}{\bool_whiledo:NT}
%  \begin{macro}{\bool_whiledo:cT}
%  \begin{macro}{\bool_whiledo:NF}
%  \begin{macro}{\bool_whiledo:cF}
%  \begin{macro}{\bool_dowhile:NT}
%  \begin{macro}{\bool_dowhile:cT}
%  \begin{macro}{\bool_dowhile:NF}
%  \begin{macro}{\bool_dowhile:cF}
%  \begin{macro}{\bool_double_if:NNnnnn}
%  \begin{macro}{\bool_double_if:cNnnnn}
%  \begin{macro}{\bool_double_if:Ncnnnn}
%  \begin{macro}{\bool_double_if:ccnnnn}
% \begin{macro}{\prg_whiledo:nT}
% \begin{macro}{\prg_whiledo:nF}
% \begin{macro}{\prg_dowhile:nT}
% \begin{macro}{\prg_dowhile:nF}
%  \begin{macro}{\predicate_p:n}
%  \begin{macro}{\predicate:nTF}
%  \begin{macro}{\predicate:nT}
%  \begin{macro}{\predicate:nF}
%  \begin{macro}{\predicate_not_p:n}
% \begin{macro}{\prg_case_int:nnn}
% \begin{macro}{\prg_case_dim:nnn}
% \begin{macro}{\prg_case_str:nnn}
% \begin{macro}{\prg_case_tlp:Nnn}
% \begin{macro}{\prg_end_case:nw}
% \begin{macro}{\prg_define_quicksort:nnn}
% \begin{macro}{\prg_quicksort:n}
% \begin{macro}{\prg_quicksort_function:n}
% \begin{macro}{\prg_quicksort_compare:nnTF}


\END
