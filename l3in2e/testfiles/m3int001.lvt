%
% Copyright (C) 2008 Frank Mittelbach
% 

\documentclass{minimal}

% Input the regression test macros for LaTeX
\input{regression-test}

\RequirePackage{l3int}
\RequirePackage{l3prg}   % both packages need each other

% Everything before this is ignored by the test system.
\START

\AUTHOR{Frank Mittelbach}


% don't display stuff from executing \begin{document}
\OMIT
\begin{document}
\TIMO


\ExplSyntaxOn


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% allocating new registers:
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\int_new:N \l_testa_int
\int_new:N \g_testa_int

\int_new:N \l_testa_int		% define second time
\int_new:N \g_testa_int		% should give errors

\int_new:N \g_testb_int


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% incrementing + decrementing
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\int_gincr:N \g_testa_int
\int_gincr:N \g_testa_int
\int_gincr:N \g_testa_int

\int_show:N \g_testa_int	% we hope for a value of 3

\int_set:Nn \l_testa_int \c_max_int
\int_show:N \l_testa_int
\int_incr:N \l_testa_int	% overflow ...
\int_show:N \l_testa_int	% what is max + 1?

\int_decr:N \l_testa_int	% and overflow back ...
\int_show:N \l_testa_int	% and now?

\int_zero:N \l_testa_int
\int_decr:N \l_testa_int
\int_decr:N \l_testa_int
\int_show:N \l_testa_int	% we hope for a value of -2


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% using invalid variables
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\int_decr:N \l_testb_int        % gives bad errors but ...

\def:Npn \l_testb_int {}

\int_decr:N \l_testb_int

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% using num expr ...
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\int_set:Nn \l_testa_int { 200 - 15  }
\int_show:N \l_testa_int	% we hope for a value of 185

\int_set:Nn \l_testa_int { 30 / \g_testa_int  }
\int_show:N \l_testa_int	% we hope for a value of 10

\int_set:Nn \l_testa_int { 27 + 3 / \g_testa_int  }
\int_show:N \l_testa_int	% we hope for a value of 28

\int_set:Nn \l_testa_int { (27 + 3 ) / \g_testa_int  }
\int_show:N \l_testa_int	% we hope for a value of 10

\int_gzero:N \g_testa_int
\int_set:Nn \l_testa_int { 5 / \g_testa_int  } % that's division by zero
\int_show:N \l_testa_int	% no idea what TeX does here ...


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% adding and substracting
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\int_zero:N \l_testa_int
\int_add:Nn \l_testa_int { 5 * 7 }
\int_add:Nn \l_testa_int { 15 }
\int_show:N \l_testa_int	% we hope for a value of 50
\int_sub:Nn \l_testa_int { 3 * 5 }
\int_show:N \l_testa_int	% we hope for a value of 35



\int_gzero:N \g_testa_int
\int_gadd:Nn \g_testa_int { (2 + 13) / (2 * 3) }
\int_gadd:Nn \g_testa_int { 3 }
\int_show:N \g_testa_int	% we hope for a value of 6
\int_gsub:Nn \g_testa_int { 5 * 5 }
\int_show:N \g_testa_int	% we hope for a value of -19


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% converting numbers to ...
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\typeout { \int_to_arabic:n { ( 2+7 ) / 3 } }

\typeout { \int_to_alph:n { 2+7 } }

\typeout { \int_to_Alph:n { 6 * 2 } }

\typeout { \int_to_roman:n { 9 } }

\typeout { \int_to_Roman:n { 21 } }

\typeout { \int_to_symbol:n { 2 } }


\typeout { ! \int_to_alph:n { -2 } ! }      
\typeout { ! \int_to_alph:n { -1 } ! }      
\typeout { ! \int_to_alph:n { 0 } ! }          \ERROR   
\typeout { ! \int_to_alph:n { 1 } ! }      


\typeout { ! \int_to_roman:n { -2 } ! }      
\typeout { ! \int_to_roman:n { -1 } ! }      
\typeout { ! \int_to_roman:n { 0 } ! }         \ERROR  
\typeout { ! \int_to_roman:n { 1 } ! }      

\typeout { ! \int_to_symbol:n { -2 } ! }      
\typeout { ! \int_to_symbol:n { -1 } ! }      
\typeout { ! \int_to_symbol:n { 0 } ! }        \ERROR  
\typeout { ! \int_to_symbol:n { 1 } ! }      



\typeout { \int_to_alph:n { \c_max_int } }

\typeout { \int_to_symbol:n {\c_max_int } }


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% evaluating integer expressions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \int_eval:n
% \int_div_truncate:nn
% \int_div_round:nn
% \int_mod:nn

% \in_compare:nNnTF

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\END
