%
% Copyright (C) 2008 LaTeX3 project
% 

\documentclass{minimal}
\input{regression-test}
\RequirePackage{expl3}
\ExplSyntaxOff
\begin{document}

\START
\AUTHOR{Will Robertson}
\ExplSyntaxOn

\TESTEXP{Basics}{                                  
  \predicate_p:n { \c_true  }              \NEWLINE
  \predicate_p:n { \c_false }              \NEWLINE     
  \predicate_p:n { \c_true  || \c_true  }  \NEWLINE
  \predicate_p:n { \c_true  || \c_false }  \NEWLINE
  \predicate_p:n { \c_false || \c_true  }  \NEWLINE
  \predicate_p:n { \c_false || \c_false }  \NEWLINE
  \predicate_p:n { \c_true  && \c_true  }  \NEWLINE
  \predicate_p:n { \c_true  && \c_false }  \NEWLINE
  \predicate_p:n { \c_false && \c_true  }  \NEWLINE
  \predicate_p:n { \c_false && \c_false }          
}

\TESTEXP{Triplet~combinations~I}{                              
  \predicate_p:n { \c_true  && \c_true  && \c_true  }  \NEWLINE
  \predicate_p:n { \c_false && \c_true  && \c_true  }  \NEWLINE
  \predicate_p:n { \c_true  && \c_false && \c_true  }  \NEWLINE
  \predicate_p:n { \c_false && \c_false && \c_true  }  \NEWLINE
  \predicate_p:n { \c_true  && \c_true  && \c_false }  \NEWLINE
  \predicate_p:n { \c_false && \c_true  && \c_false }  \NEWLINE
  \predicate_p:n { \c_true  && \c_false && \c_false }  \NEWLINE
  \predicate_p:n { \c_false && \c_false && \c_false }          
}

\TESTEXP{Triplet~combinations~II}{                             
  \predicate_p:n { \c_true  || \c_true  || \c_true  }  \NEWLINE
  \predicate_p:n { \c_false || \c_true  || \c_true  }  \NEWLINE
  \predicate_p:n { \c_true  || \c_false || \c_true  }  \NEWLINE
  \predicate_p:n { \c_false || \c_false || \c_true  }  \NEWLINE
  \predicate_p:n { \c_true  || \c_true  || \c_false }  \NEWLINE
  \predicate_p:n { \c_false || \c_true  || \c_false }  \NEWLINE
  \predicate_p:n { \c_true  || \c_false || \c_false }  \NEWLINE
  \predicate_p:n { \c_false || \c_false || \c_false }          
}

\TESTEXP{Triplet~combinations~III}{                            
  \predicate_p:n { \c_true  && \c_true  || \c_true  }  \NEWLINE
  \predicate_p:n { \c_false && \c_true  || \c_true  }  \NEWLINE
  \predicate_p:n { \c_true  && \c_false || \c_true  }  \NEWLINE
  \predicate_p:n { \c_false && \c_false || \c_true  }  \NEWLINE
  \predicate_p:n { \c_true  && \c_true  || \c_false }  \NEWLINE
  \predicate_p:n { \c_false && \c_true  || \c_false }  \NEWLINE
  \predicate_p:n { \c_true  && \c_false || \c_false }  \NEWLINE
  \predicate_p:n { \c_false && \c_false || \c_false }          
}

\TESTEXP{Triplet~combinations~IV}{                             
  \predicate_p:n { \c_true  || \c_true  && \c_true  }  \NEWLINE
  \predicate_p:n { \c_false || \c_true  && \c_true  }  \NEWLINE
  \predicate_p:n { \c_true  || \c_false && \c_true  }  \NEWLINE
  \predicate_p:n { \c_false || \c_false && \c_true  }  \NEWLINE
  \predicate_p:n { \c_true  || \c_true  && \c_false }  \NEWLINE
  \predicate_p:n { \c_false || \c_true  && \c_false }  \NEWLINE
  \predicate_p:n { \c_true  || \c_false && \c_false }  \NEWLINE
  \predicate_p:n { \c_false || \c_false && \c_false }          
}


\TESTEXP{Lazy~evaluation}{
  \predicate_p:n{
    \int_compare_p:nNn 1=1 &&
    \predicate_p:n {
      \int_compare_p:nNn 2=3 ||
      \int_compare_p:nNn 4=4 ||
      \int_compare_p:nNn 1=\ERROR % is skipped
    } &&
    \int_compare_p:nNn 2=2 
  }
}

\TESTEXP{XOR}{                   
  \predicate_xor_p:nn { \c_true  }{ \c_true  }  \NEWLINE
  \predicate_xor_p:nn { \c_true  }{ \c_false }  \NEWLINE
  \predicate_xor_p:nn { \c_false }{ \c_true  }  \NEWLINE
  \predicate_xor_p:nn { \c_false }{ \c_false }          
}

\END
