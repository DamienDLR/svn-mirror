%
% Copyright (C) 2010 LaTeX3 Project
% 

\documentclass{minimal}
\input{regression-test}

\RequirePackage{xcoffins}

\RequirePackage{color}
\newcommand\cbox[2][.8]{{\setlength\fboxsep{0pt}\colorbox[gray]{#1}{#2}}}

\begin{document}
\START
\AUTHOR{Frank Mittelbach}
\ExplSyntaxOn

\OMIT

\newcoffin \aaa
\newcoffin \bbb

\sbox \aaa {\tabcolsep0pt\begin{tabular}[c]{|c|}\hline a\\b\\cccccccccccccc\\d
                \\e\\e\\e\\e\\\hline\end{tabular}}
\sbox \bbb {\fbox{A sample Text}}

\showboxdepth 9999
\showboxbreadth 9999
\TIMO


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{Test~ 1:~ rotation}{
\showbox\aaa  x\cbox{\usebox\aaa}
\rotatecoffin \aaa {45}
\showbox\aaa  x\cbox{\usebox\aaa}
\rotatecoffin \aaa {45}
\showbox\aaa  x\cbox{\usebox\aaa}
}

\OMIT
\sbox \aaa {\tabcolsep0pt\begin{tabular}[c]{|c|}\hline a\\b\\cccccccccccccc\\d
                \\e\\e\\e\\e\\\hline\end{tabular}}

\rotatecoffin \aaa {45}
\rotatecoffin \aaa {45}
\rotatecoffin \aaa {45}
\displaycoffinhandle \aaa {b}{l} {yellow}
\rotatecoffin \bbb {45}
\displaycoffinhandle \bbb {B}{hc} {yellow}
\TIMO


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{Test~ 2:~ rotation + alignment}{
\newpage
\aligncoffins \aaa [b,l] \bbb[B,hc](30pt,0pt)
\showbox\aaa x\cbox{\usebox\aaa}x
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{}{
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\TEST{}{
}

\end{document}
