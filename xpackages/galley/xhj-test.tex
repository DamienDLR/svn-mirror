\documentclass{article}


\setlength\textwidth{5cm}

\usepackage{xparse,xhj,galley2}
\tracinggalleys=2  % want tracing here


\def\trace{\tracingassigns=1\tracingall}

\IgnoreWhiteSpace

% simple definition for \\
% ignoring * form
%
\DeclareDocumentCommand\\{so}
  {\leavevmode \unskip
   \hskip \GAL@@linefillskip 
   \IfNoValueF{#2}{\vadjust{\vskip #2}}\break
  }



\setlength\parindent{12pt}

\begin{document}

some starting text

%\trace
\UseInstance{pshape}{staggered}

\section{This should\\ be\\ 
         a really staggered\\heading (but isn't)}

In fact we should not be surprised since the standard \LaTeX{} heading
code is essentially using its own pshape and thus overwriting the
outer pshape declaration.

\UseInstance{pshape}{staggered}
\UseInstance{justification}{raggedright}
This is a paragraph for testing various justification\\ settings. We have some
text and after the word `word' \\ we just had a forced line break. We
do some more line break testing, e.g., this\\[7pt] one was supposed to
add 7pts of extra space.


And here a paragraph for comparison with some text some text some text
also-containing-a-longer-word some text some text some text some text
some text some text some text.

\section{Linebreaks}


A line break with linebreak\linebreak
and now ...

% A line break with oldlinebreak\oldlinebreak
% what takes longer?


\section{Justified}

%\trace
some text\marginpar{\UseInstance{justification}{raggedright}\fussy
       \fontfamily{pop}\fontsize{7}{9}\selectfont ZZZ Some text in
       optima. Some text in optima. Some text in optima. Some text in
       optima. Some text in optima.}
some text some text some text some text some text some text some text
some text some text some text some text some text some text
some text some text some text some text some text some text some text
some text some text some text some text some text some text
some text some text some text some text some text some text some text
some text some text some text some text some text some text

%\trace

\section{Raggedright}

\UseInstance{justification}{raggedright}
This is a paragraph for testing various justification settings. We have some
text and after the word `word' \\ we just had a forced line break. We
do some more line break testing, e.g., this\\[7pt] one was supposed to
add 7pts of extra space.


And here a paragraph for comparison with some text some text some text
also-containing-a-longer-word some text some text some text some text
some text some text some text.

\section{Left}

\UseInstance{justification}{raggedleft}
\UseInstance{hyphenation}{off}\sloppy
This is a paragraph for testing various justification settings. We have some
text and after the word `word' \\ we just had a forced line break. We
do some more line break testing, e.g., this\\[7pt] one was supposed to
add 7pts of extra space.



And here a paragraph for comparison with some text some text some text
also-containing-a-longer-word some text some text some text some text
some text some text some text.

\tracingpages=1

\section{Adjust}

\UseInstance{justification}{adjust}
\UseInstance{hyphenation}{on}\fussy
This is a paragraph for testing various justification settings. We have some
text and after the word `word' \\ we just had a forced line break. We
do some more line break testing, e.g., this\\[7pt] one was supposed to
add 7pts of extra space.


And here a paragraph for comparison with some text some text some text
also-containing-a-longer-word some text some text some text some text
some text some text some text. 

\section{Center}

\UseInstance{justification}{center}
This is a paragraph for testing various justification settings. We have some
text and after the word `word' \\ we just had a forced line break. We
do some more line break testing, e.g., this\\[7pt] one was supposed to
add 7pts of extra space.


And here a paragraph for comparison with some text some text some text
also-containing-a-longer-word some text some text some text some text
some text some text some text.

\section{Center first}

\UseInstance{justification}{centerfirst-adjust}
This is a paragraph for testing various justification settings. We have some
This is a paragraph for testing various justification settings. We have some
This is a paragraph for testing various justification settings. We have some
This is a paragraph for testing various justification settings. We have some
text and after the word `word' \\ we just had a forced line break. We
do some more line break testing, e.g., this\\[7pt] one was supposed to
add 7pts of extra space.
This is a paragraph for testing various justification settings. We have some
This is a paragraph for testing various justification settings. We have some
This is a paragraph for testing various justification settings. We have some
This is a paragraph for testing various justification settings. We have some


And here a paragraph for comparison with some text some text some text
also-containing-a-longer-word some text some text some text some text
some text some text some text.


\section{Center middle}

\hrule

\UseInstance{justification}{centermiddle}

This is a paragraph for testing various justification settings. We have some
text and after the word `word' \\ we just had a forced line break. We
do some more line break testing, e.g., this\\[7pt] one was supposed to
add 7pts of extra space.


And here a paragraph for comparison with some text some text some text
also-containing-a-longer-word some text some text some text some text
some text some text some text.

\hrule

\end{document}

