\documentclass{article}


\usepackage{trace} % on web site
\usepackage{xlang}


\DeclareLanguageProperty{\textdirection}

\SetLanguagePropertyValue{default}{\textdirection}{TLT}
\SetLanguagePropertyValue{french}{\textdirection}{TRT}



\DeclareLanguageProperty{\chaptername}
\DeclareLanguageProperty{\refname}
\DeclareLanguageProperty{\refname}         % test for double entry

\DeclareLanguageProperty{\hyphpatterns}

\makeatletter
\catcode`\_=11
\show\g_lang_known_cmds_queue

%\traceon

\DeclareDocumentLanguages{german,french,english}


\SetLanguagePropertyValue{default}{\hyphpatterns}{none}

\SetLanguagePropertyValue{english}{\chaptername}{Chapter}

\SetLanguagePropertyValue{german} {\chaptername}{Kapitel}
\SetLanguagePropertyValue{german} {\hyphpatterns}{germ31}
\SetLanguagePropertyValue{german} {\refname}{Bibliographie}

\show\g_lang_german_plist

\ShowLanguagePropertyStatus


\SetLanguagePropertyValueMapping{\refname}{first}
\SetLanguagePropertyValueMapping{\chaptername}{second}
\SetLanguagePropertyValueMapping{\hyphpatterns}{all}

\show\g_lang_known_mappings_plist

\makeatletter
\DeclareRobustCommand\quoted[1]{%
    \@tracepush{quoted}
    \lquote#1\rquote
    \@tracepop{quoted}
}
\DeclareLanguageProperty\lquote
\DeclareLanguageProperty\rquote

\SetLanguagePropertyValue{german} {\lquote}{,,}
\SetLanguagePropertyValue{german} {\rquote}{``}

\SetLanguagePropertyValue{french} {\lquote}{>>}
\SetLanguagePropertyValue{french} {\rquote}{<<}

\SetLanguagePropertyValue{default} {\lquote}{``}
\SetLanguagePropertyValue{default} {\rquote}{''}

\SetLanguagePropertyValueMapping\lquote{subblock}
\SetLanguagePropertyValueMapping\rquote{subblock}


\SetDocumentLanguage{german}

\input{german.xld}


\begin{document}


\tableofcontents

\section{Ein \quoted{deutscher} Titel}

Dies ist ein deutscher Text.

%\traceon
\baselanguage{english}

\section{An \quoted{English} section}

And here is a longer part in English

\begin{langblock}{german}
\ShowLanguagePropertyStatus
 ein \chaptername{} deutscher 
 \langfrag{english}{in english its \quoted{default} is \chaptername}
 \quoted{text in quotes} right?
 \contentsname{} not defined?
 \begin{langblock}{french}
\ShowLanguagePropertyStatus
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  \langfrag{english}{and some \quoted{english} text in the middle of
 the french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
  some \quoted{french} ce ne pas?
 \end{langblock}
\end{langblock}

\langfrag{spanish}{an error message}



\showoutput

\end{document}



 \show\actionsgermanfirst
 \show\actionsgermansecond
 \show\actionsgermanblock
 \show\actionsgermanfrag
 \show\actionsgermanall

 \show\actionsenglishbase
 \show\actionsenglishall

\ShowLanguagePropertyStatus

