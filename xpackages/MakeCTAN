

XBASE-TEST = \
	template-test.tex \
	template-test2.tex \
	tprestrict-test.tex \
  	xparse-test.tex


README = readme-ctan.txt

XBASE-INS = \
	xbase.ins

XBASE-DTX = \
	xparse.dtx \
	template.dtx \
	ldcsetup.dtx


XBASE-PDF = \
	xparse.pdf \
	template.pdf \
	ldcsetup.pdf


tds-dirs:
	mkdir -p ../../distrib
	mkdir -p ../../distrib/xpackages
	mkdir -p ../../distrib/xpackages-tds
	mkdir -p ../../distrib/xpackages-tds/doc
	mkdir -p ../../distrib/xpackages-tds/doc/latex
	mkdir -p ../../distrib/xpackages-tds/doc/latex/xpackages
	mkdir -p ../../distrib/xpackages-tds/source
	mkdir -p ../../distrib/xpackages-tds/source/latex
	mkdir -p ../../distrib/xpackages-tds/source/latex/xpackages
	mkdir -p ../../distrib/xpackages-tds/tex
	mkdir -p ../../distrib/xpackages-tds/tex/latex
	mkdir -p ../../distrib/xpackages-tds/tex/latex/xpackages


tds-dirs-clean: tds-dirs
	rm -f ../../distrib/xpackages-tds/doc/latex/xpackages/*
	rm -f ../../distrib/xpackages-tds/source/latex/xpackages/*
	rm -f ../../distrib/xpackages-tds/tex/latex/xpackages/*
	rm -f ../../distrib/xpackages/*
	rm -f ../../distrib/xpackages.zip
	rm -f ../../distrib/xpackages.tds.zip

xbase-styles:
	cd xbase ; latex xbase.ins

xbase-tds: tds-dirs xbase-docs
	cp xbase/*.sty ../../distrib/xpackages-tds/tex/latex/xpackages
	cd xbase ; cp $(XBASE-DTX) $(XBASE-INS) $(XBASE-TEST) \
	../../../distrib/xpackages-tds/source/latex/xpackages
	cd xbase ; cp $(XBASE-PDF) ../../../distrib/xpackages-tds/doc/latex/xpackages

xbase-ctan: xbase-docs tds-dirs
	cd xbase ; cp $(XBASE-DTX) $(XBASE-INS) $(XBASE-TEST) $(XBASE-PDF)  \
	   ../../../distrib/xpackages

xbase-docs: xbase-styles 
	cd xbase ; pdflatex xparse.dtx ; pdflatex xparse.dtx ;\
	   	   pdflatex xparse.dtx ; pdflatex xparse.dtx;
	cd xbase ; pdflatex template.dtx ; pdflatex template.dtx ;\
	   	   pdflatex template.dtx ; pdflatex template.dtx;
	cd xbase ; pdflatex ldcsetup.dtx ; pdflatex ldcsetup.dtx ;\
	   	   pdflatex ldcsetup.dtx ; pdflatex ldcsetup.dtx;


distrib-tds: tds-dirs-clean xbase-tds xbase-ctan
	cp  $(README) ../../distrib/xpackages-tds/doc/latex/xpackages
	cd ../../distrib/xpackages-tds ; zip -r ../xpackages.tds.zip *

distrib-ctan: distrib-tds
	cp  $(README) ../../distrib/xpackages
	cd ../../distrib/ ; zip -r xpackages.zip xpackages xpackages.tds.zip

