% Copyright 2004 Frank Mittelbach
% All rights reserved
%
%
% tmp test file for balancing ...
%
\def\rcsdata$#1: #2,v #3${
  \def\rcsdata{#2 #3}}
\rcsdata$Id$

%\tracingonline=1
%\tracingpages=1
%\showoutput


\documentclass{article}

\usepackage{varioref,shortvrb}
\MakeShortVerb\|
\newcommand\meta[1]{\mbox{$\langle$\textit{#1}$\rangle$}}

  \usepackage{xoutput}
  \usepackage{xo-grid}
  \ShowGridfalse
  \notrace

\DeclareFloatSequenceClass{floats}  % this will vanish again

\DeclareFloatType{figure}
  {
   sequence-class-id  = floats,
   toc-extension      = lof,
   caption-text       = \figurename,
   numbered-boolean   = true,
   numbered-id        = figure,
   numbered-within-id = ,
   numbered-action    = \arabic{figure},
   body-decls         = 
  }




\DeclareFloatType{table}
  {
   sequence-class-id  = floats,
   toc-extension      = lot,
   caption-text       = \tablename,
   numbered-boolean   = true,
   numbered-id        = figure,
   body-decls        = \footnotesize,
  }

\DeclareFloatArea   {t12}
   {
     class-close-list = ,
     all-close-list  = ,
     max-float-num   = 1,
   }


\DeclareFloatArea   {b12}
   {
     class-close-list = {t12,t11,b11},
     all-close-list  = ,
     max-float-num   = 1,
   }


\DeclareFloatArea   {t11}
   {
     class-close-list = ,
     all-close-list  = {b11},
     max-float-num   = 1,
   }


\DeclareFloatArea   {b11}
   {
     class-close-list = {t12,t11},
     all-close-list  = ,
     max-float-num   = 1,
   }


\DeclareFloatArea   {t21}
   {
     class-close-list = {t12,t11,b11},
     all-close-list  = ,
     max-float-num   = 1,
   }


\DeclareFloatArea   {b21}
   {
     class-close-list = {t12,t11,b11},
     all-close-list  = ,
     max-float-num   = 1,
   }


\topskip=12pt

\DeclareInstance{pagesetup2}{twocol}{std}{
   column-num    = 2,
   column-width  = 229.5pt, % this strange value is what LaTeX2e
                            % uses for two column article
   column-height = \DelayEvaluation 50\baselineskip + \topskip,
   column-sep    = 20pt,
%
   float-callout-constraint = after,
   float-callout-span-constraint = flexible,
   bottom-float-footnote-constraint=forbidden,
%   bottom-float-footnote-constraint=none,
   max-float-num =2,
%
   area-list = {t12,t11,b11,b12,t21},
   area-list = {b12,b11,b21},
%
%   footnote-setup = \UseTemplate{footnotesetup}{ftnright}{},
%   footnote-setup = \UseTemplate{footnotesetup}{margin}{},
   footnote-setup = \UseTemplate{footnotesetup}{std}{},
%
   float-text-sep  = 36pt minus 8pt,
   float-area-sep  = 20pt,
   float-float-sep = 20pt,
%
   grid-point-sep = 12pt,      % no grid right now
  }


\title{Formatting documents with floats\\
       A new algorithm for \LaTeXe$^*$}
\author{\copyright{} Frank Mittelbach}
\date{\rcsdata}

\newcounter{sample}

\newcommand\textsample{Some boring text to fill a page with rubbish. The
fox jumped over the green grass.}

\makeatletter
\newcommand\sample[1]{\par\stepcounter{sample}[X \thesample\ with #1]
  \count@=0 \@whilenum \count@<#1 \do{\ \textsample\advance\count@\@ne}}


\begin{document}

\UseInstance{pagesetup2}{twocol}

\maketitle

\ShowGridtrue

\showoutput \tracefloats

\sample4
\sample4
\sample{6}
\balancecolumns

\sample5
\sample2
\sample4
\sample{14}
\sample{14}
\sample5
\sample{22}
\sample8

\balancecolumns

\sample9
\sample5


\end{document}


% $Log$
% Revision 1.2  2004/10/31 21:45:54  mittelba
% *** empty log message ***
%
% Revision 1.1  2004/10/30 20:11:13  mittelba
% tmp test file for balancing
%
