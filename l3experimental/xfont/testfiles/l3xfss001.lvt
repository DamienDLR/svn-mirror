%
% Copyright (C) 2011 LaTeX3 Project
%

\RequirePackage{xfss}
\documentclass{minimal}
\input{regression-test}

\START
\AUTHOR{Bruno Le Floch}
\showboxbreadth=\maxdimen
\showboxdepth=\maxdimen

\TEST{Declare Symbol Font}{
  \DeclareSymbolFont{operators}{OT1}{cmr}{m}{n}
  \DeclareSymbolFont{letters}{OML}{cmm}{b}{it}
  \DeclareSymbolFont{symbols}{OMS}{cmsy}{m}{n}
  \DeclareSymbolFont{largesymbols}{OMX}{cmex}{m}{it}
}

\OMIT
\ExplSyntaxOn
\cs_new:Npn \showtextcommand #1
  { \exp_after:wN \showtextcommand_aux:NNN #1 }
\cs_new:Npn \showtextcommand_aux:NNN #1#2#3
  {
    \cs_if_exist:cTF { \cs_to_str:N #3 ~ }
      { \cs_show:c { \cs_to_str:N #3 ~ } }
      { \cs_show:N #3 }
  }
\ExplSyntaxOff
\TIMO

\TEST{Declare Text Command}{
  \showtextcommand\k
  \DeclareTextCommand{\k}{T1}[1]{\oalign{\null#1\crcr\hidewidth\char12}}
  \showtextcommand\k
  \DeclareTextCommand{\k}{OT1}[1]{\oalign{\null#1\crcr\hidewidth\char12}}
  \showtextcommand\k
}

\OMIT
\begin{document}
\TIMO

\TEST{Normal text}{%
  \setbox0=\hbox{Abc, defi.}
  \showbox0\relax
  \box0\relax
}

\TEST{Bold text}{%
  \setbox0=\hbox{A\textbf{b}c, d{\bfseries e}fi.}
  \showbox0\relax
  \box0\relax
}

\TEST{Math}{%
  \setbox0=\vbox{\noindent Abc
    \[
    \sum_\alpha^\beta\frac{c}{\mathrm{d}} = \lambda+\#
    \]
    More.}
  \showbox0\relax
  \box0\relax
}

\TEST{Text command}{%
  \setbox0=\hbox{\k{b}}
  \showbox0
  \box0
}

\par\vfill\break
\END
ï¿½